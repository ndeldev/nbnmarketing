# Changelog: Theme & Styling Fix

**Date:** 2026-01-26
**Version:** 2.0.1
**Type:** Bug Fix

---

## Summary

Fixed dark theme bleeding into light sections. The site was displaying dark backgrounds across Stats, Services, Features, and Footer sections when it should have been light.

---

## Root Cause

1. **Fixed dark overlay in page.tsx** - A `<div>` with `backgroundColor: "#1a1a2e"` was covering the entire page at z-index -50
2. **Incorrect CSS variable usage** - Sections were using brand colors (toki-nezu, fuji-nezu) for backgrounds instead of semantic colors (muted, border)
3. **Dark mode not properly disabled** - System dark mode preference was affecting the site

---

## Changes Made

### Files Modified

| File | Change |
|------|--------|
| `src/app/page.tsx` | Removed fixed dark overlay div |
| `src/app/globals.css` | Added media query to force light mode |
| `src/app/layout.tsx` | Added `light` class and `colorScheme: 'light'` to html |
| `src/components/sections/Stats.tsx` | Changed `border-toki-nezu/50 bg-toki-nezu/20` to `border-border/50` |
| `src/components/sections/Features.tsx` | Changed `bg-fuji-nezu/20` to `bg-primary/10` for icon containers |
| `src/components/sections/Services.tsx` | Changed selected state from `bg-toki-nezu/50 text-shikoku` to `bg-muted` |
| `src/components/layout/Footer.tsx` | Changed `border-toki-nezu/40 bg-toki-nezu/10` to `border-border bg-muted/30` |
| `src/app/services/page.tsx` | Changed icon styling to use `bg-primary/10` and `text-primary` |

---

## Before/After

### Stats Section
```css
/* Before (dark) */
className="border-y border-toki-nezu/50 bg-toki-nezu/20 py-20 lg:py-24"

/* After (light) */
className="border-y border-border/50 py-20 lg:py-24"
```

### Features Icon Containers
```css
/* Before (brand color) */
className="flex h-12 w-12 items-center justify-center rounded-2xl bg-fuji-nezu/20"

/* After (semantic color) */
className="flex h-12 w-12 items-center justify-center rounded-2xl bg-primary/10"
```

### Services Selected State
```css
/* Before (brand color) */
"bg-toki-nezu/50 font-medium text-shikoku"

/* After (semantic color) */
"bg-muted font-medium"
```

### Footer
```css
/* Before (brand color) */
className="border-t border-toki-nezu/40 bg-toki-nezu/10"

/* After (semantic color) */
className="border-t border-border bg-muted/30"
```

### Page.tsx Dark Overlay (Removed)
```tsx
/* Before - This was covering everything */
<div
  className="fixed inset-x-0 top-0 h-screen -z-50 pointer-events-none"
  style={{ backgroundColor: "#1a1a2e" }}
  aria-hidden="true"
/>

/* After - Removed entirely */
```

### globals.css Dark Mode Override (Added)
```css
/* Added to force light mode */
@media (prefers-color-scheme: dark) {
  :root {
    color-scheme: light;
    --background: oklch(0.985 0 0);
    --foreground: oklch(0.145 0 0);
    /* ... all light mode variables ... */
  }
}
```

---

## Design Principle Clarified

**Brand colors should be used for ACCENTS, not backgrounds:**

| Color | Correct Usage | Incorrect Usage |
|-------|---------------|-----------------|
| Shikoku (#2E2930) | CTA buttons, primary text | Section backgrounds |
| Fuji Nezu (#A6A5C4) | Highlights, emphasis text, icons | Card backgrounds |
| Toki Nezu (#E4D2D8) | Subtle accents, decorative | Section backgrounds |

**For section backgrounds, use semantic colors:**
- `bg-muted/30` - Subtle section differentiation
- `bg-card` - Card backgrounds
- `bg-background` - Page background
- `border-border` - Standard borders

---

## Sections Affected

- [x] Hero - No change (intentionally dark)
- [x] Stats - Fixed to light
- [x] Services - Fixed to light
- [x] Features - Fixed to light
- [x] CTA - No change (intentionally dark, uses bg-primary)
- [x] Footer - Fixed to light

---

## Testing Performed

1. Visual inspection of all sections
2. Build verification (`npm run build`)
3. Dev server test on port 7777
4. Verified light mode persists regardless of system preference

---

## Related Files

- SITE-SPEC.md (to be created)
- STYLING.md (existing documentation)
